<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Data.Swagger.Schema.Validation</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Data-Swagger-Schema-Validation.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Data-Swagger-Schema-Validation.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">swagger2-1.2.1: Swagger 2.0 data model</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Copyright</th><td>(c) 2015 GetShopTV</td></tr><tr><th>License</th><td>BSD3</td></tr><tr><th>Maintainer</th><td>Nickolay Kudasov &lt;nickolay@getshoptv.com&gt;</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Data.Swagger.Schema.Validation</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">How to use validation</a><ul><li><a href="#g:2">Examples</a></li><li><a href="#g:3">Validating <code><code>Maybe</code></code></a></li></ul></li><li><a href="#g:4">JSON validation</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Validate JSON values with Swagger Schema.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:validateToJSON">validateToJSON</a> :: <span class="keyword">forall</span> a. (ToJSON a, <a href="Data-Swagger-Internal-Schema.html#t:ToSchema">ToSchema</a> a) =&gt; a -&gt; [<a href="Data-Swagger-Schema-Validation.html#t:ValidationError">ValidationError</a>]</li><li class="src short"><a href="#v:validateToJSONWithPatternChecker">validateToJSONWithPatternChecker</a> :: <span class="keyword">forall</span> a. (ToJSON a, <a href="Data-Swagger-Internal-Schema.html#t:ToSchema">ToSchema</a> a) =&gt; (<a href="Data-Swagger-Internal.html#t:Pattern">Pattern</a> -&gt; Text -&gt; <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a>) -&gt; a -&gt; [<a href="Data-Swagger-Schema-Validation.html#t:ValidationError">ValidationError</a>]</li><li class="src short"><span class="keyword">type</span> <a href="#t:ValidationError">ValidationError</a> = <a href="../base-4.8.2.0/Data-String.html#t:String">String</a></li></ul></div><div id="interface"><h1 id="g:1">How to use validation</h1><div class="doc"><p>This module provides helpful functions for JSON validation.
 These functions are meant to be used in test suites for your application
 to ensure that JSON respresentation for your data corresponds to
 schemas you're using for the Swagger specification.</p><p>It is recommended to use validation functions as QuickCheck properties
 (see <a href="http://hackage.haskell.org/package/QuickCheck">http://hackage.haskell.org/package/QuickCheck</a>).</p></div><h2 id="g:2">Examples</h2><div class="doc"><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>validateToJSON &quot;hello&quot;
</code></strong>[]
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>validateToJSON False
</code></strong>[]
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>newtype Nat = Nat Integer deriving Generic
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>instance ToJSON Nat where toJSON (Nat n) = toJSON n
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>instance ToSchema Nat where declareNamedSchema proxy = genericDeclareNamedSchema defaultSchemaOptions proxy &amp; mapped.minimum_ ?~ 0
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>validateToJSON (Nat 10)
</code></strong>[]
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>validateToJSON (Nat (-5))
</code></strong>[&quot;value -5.0 falls below minimum (should be &gt;=0.0)&quot;]
</pre></div><h2 id="g:3">Validating <code><code><a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a></code></code></h2><div class="doc"><p>Because <code><code><a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a></code> a</code> has the same schema as <code>a</code>, validation
 generally fails for <code>null</code> JSON:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>validateToJSON (Nothing :: Maybe String)
</code></strong>[&quot;expected JSON value of type SwaggerString&quot;]
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>validateToJSON ([Just &quot;hello&quot;, Nothing] :: [Maybe String])
</code></strong>[&quot;expected JSON value of type SwaggerString&quot;]
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>validateToJSON (123, Nothing :: Maybe String)
</code></strong>[&quot;expected JSON value of type SwaggerString&quot;]
</pre><p>However, when <code><code><a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a></code> a</code> is a type of a record field,
 validation takes <code><code>required</code></code> property of the <code><code>Schema</code></code>
 into account:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>data Person = Person { name :: String, age :: Maybe Int } deriving Generic
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>instance ToJSON Person
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>instance ToSchema Person
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>validateToJSON (Person &quot;John&quot; (Just 25))
</code></strong>[]
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>validateToJSON (Person &quot;John&quot; Nothing)
</code></strong>[]
</pre></div><h1 id="g:4">JSON validation</h1><div class="top"><p class="src"><a name="v:validateToJSON" class="def">validateToJSON</a> :: <span class="keyword">forall</span> a. (ToJSON a, <a href="Data-Swagger-Internal-Schema.html#t:ToSchema">ToSchema</a> a) =&gt; a -&gt; [<a href="Data-Swagger-Schema-Validation.html#t:ValidationError">ValidationError</a>] <a href="src/Data-Swagger-Internal-Schema-Validation.html#validateToJSON" class="link">Source</a></p><div class="doc"><p>Validate <code><code>ToJSON</code></code> instance matches <code><code><a href="Data-Swagger-Internal-Schema.html#t:ToSchema">ToSchema</a></code></code> for a given value.
 This can be used with QuickCheck to ensure those instances are coherent:</p><pre>validateToJSON (x :: Int) == []</pre><p><em>NOTE:</em> <code><code><a href="Data-Swagger-Schema-Validation.html#v:validateToJSON">validateToJSON</a></code></code> does not perform string pattern validation.
 See <code><code><a href="Data-Swagger-Schema-Validation.html#v:validateToJSONWithPatternChecker">validateToJSONWithPatternChecker</a></code></code>.</p></div></div><div class="top"><p class="src"><a name="v:validateToJSONWithPatternChecker" class="def">validateToJSONWithPatternChecker</a> :: <span class="keyword">forall</span> a. (ToJSON a, <a href="Data-Swagger-Internal-Schema.html#t:ToSchema">ToSchema</a> a) =&gt; (<a href="Data-Swagger-Internal.html#t:Pattern">Pattern</a> -&gt; Text -&gt; <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a>) -&gt; a -&gt; [<a href="Data-Swagger-Schema-Validation.html#t:ValidationError">ValidationError</a>] <a href="src/Data-Swagger-Internal-Schema-Validation.html#validateToJSONWithPatternChecker" class="link">Source</a></p><div class="doc"><p>Validate <code><code>ToJSON</code></code> instance matches <code><code><a href="Data-Swagger-Internal-Schema.html#t:ToSchema">ToSchema</a></code></code> for a given value and pattern checker.
 This can be used with QuickCheck to ensure those instances are coherent.</p><p>For validation without patterns see <code><code><a href="Data-Swagger-Schema-Validation.html#v:validateToJSON">validateToJSON</a></code></code>.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:ValidationError" class="def">ValidationError</a> = <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> <a href="src/Data-Swagger-Internal-Schema-Validation.html#ValidationError" class="link">Source</a></p><div class="doc"><p>Validation error message.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>